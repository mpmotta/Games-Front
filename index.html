<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Lista de Jogos</title>
  <link rel="stylesheet" href="css/styles.css" />
</head>
<body>
  <h1>Lista de Jogos</h1>
  <div id="games" class="container">Carregando jogos...</div>
  <script>
    async function loadGames() {
      try {
        //altera aqui o endereco do servidor pelo da AWS
        const response = await fetch('http://localhost:8080/API-Games/api.php/games/');
        if (!response.ok) throw new Error("Erro ao carregar jogos");
        const jogos = await response.json();
        const container = document.getElementById('games');
        container.innerHTML = "";
        jogos.forEach(jogo => {
          const card = document.createElement('div');
          card.className = 'card';
          const imgSrc = jogo.imagem ? `img/${jogo.imagem}` : 'https://via.placeholder.com/200x230?text=Sem+Imagem';
          card.innerHTML = `
            <img src="${imgSrc}" alt="${jogo.nome}">
            <div class="card-content">
              <div class="title">
                <a href="game.html?id=${jogo.id}">${jogo.nome}</a>
              </div>
              <div class="categoria">Categoria: ${jogo.categoria}</div>
              <div class="estudio">Estúdio: ${jogo.estudio}</div>
              <div class="idade">Faixa Etária: ${jogo.idade}</div>
              <div class="preco">R$ ${Number(jogo.valor).toFixed(2).replace('.', ',')}</div>
              ${jogo.disponibilidade ? '' : '<div class="indisponivel">Indisponível</div>'}
            </div>
          `;
          container.appendChild(card);
        });
      } catch (e) {
        document.getElementById('games').textContent = 'Erro ao carregar jogos.';
        console.error(e);
      }
    }
    loadGames();
  </script>
</body>
</html>
